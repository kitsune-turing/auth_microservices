# ========================================
# SIATA LOGIN SERVICES - Environment Variables
# ========================================
# Copy this file to .env and configure your values

# ========================================
# PostgreSQL Database
# ========================================
POSTGRES_DB=auth_login_services
POSTGRES_USER=admin
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION_secure_password_123

# Database URLs for each service
DATABASE_URL_AUTH=postgresql+asyncpg://auth_service:auth_service_password@postgres:5432/auth_login_services
DATABASE_URL_USERS=postgresql+asyncpg://users_service:users_service_password@postgres:5432/auth_login_services
DATABASE_URL_JANO=postgresql+asyncpg://jano_service:jano_service_password@postgres:5432/auth_login_services

# ========================================
# Auth Microservice (Port 8001)
# ========================================
AUTH_SERVICE_PORT=8001
AUTH_SERVICE_HOST=0.0.0.0

# JWT Configuration
JWT_SECRET_KEY=CHANGE_ME_IN_PRODUCTION_min_32_characters_long_secret_key_here_12345
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Microservices URLs
USERS_SERVICE_URL=http://users_microservice:8006
OTP_SERVICE_URL=http://otp_microservice:8003
JANO_SERVICE_URL=http://jano_microservice:8005

# Timeouts (seconds)
USERS_SERVICE_TIMEOUT=10
OTP_SERVICE_TIMEOUT=5
JANO_SERVICE_TIMEOUT=10

# ========================================
# Users Microservice (Port 8006)
# ========================================
USERS_SERVICE_PORT=8006
USERS_SERVICE_HOST=0.0.0.0
USERS_DATABASE_PASSWORD=users_service_password

# ========================================
# OTP Microservice (Port 8003)
# ========================================
OTP_SERVICE_PORT=8003
OTP_SERVICE_HOST=0.0.0.0
OTP_EXPIRY_MINUTES=5
OTP_MAX_ATTEMPTS=3
OTP_CODE_LENGTH=6

# Email Configuration (for OTP delivery)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@siata.gov.co
SMTP_FROM_NAME=SIATA Security

# SMS Configuration (optional)
# SMS_PROVIDER=twilio
# SMS_ACCOUNT_SID=your-twilio-account-sid
# SMS_AUTH_TOKEN=your-twilio-auth-token
# SMS_FROM_NUMBER=+1234567890

# ========================================
# JANO Security Microservice (Port 8005)
# ========================================
JANO_SERVICE_PORT=8005
JANO_SERVICE_HOST=0.0.0.0
JANO_DATABASE_PASSWORD=jano_service_password
AUTH_SERVICE_URL=http://auth_microservice:8001

# ========================================
# Management Application (Port 8007)
# ========================================
MGMT_APP_SERVICE_PORT=8007
MGMT_APP_SERVICE_HOST=0.0.0.0
MGMT_APP_DATABASE_PASSWORD=mgmt_app_password

# ========================================
# Management Module (Port 8008)
# ========================================
MGMT_MODULE_SERVICE_PORT=8008
MGMT_MODULE_SERVICE_HOST=0.0.0.0
MGMT_MODULE_DATABASE_PASSWORD=mgmt_module_password

# ========================================
# Environment Configuration
# ========================================
ENVIRONMENT=development
# Options: development, staging, production

LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# ========================================
# CORS Configuration
# ========================================
CORS_ORIGINS=*
# Production: CORS_ORIGINS=https://app.siata.gov.co,https://admin.siata.gov.co

# ========================================
# Database Connection Pool
# ========================================
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_PRE_PING=True
DATABASE_TIMEOUT=10

# ========================================
# Security Settings
# ========================================
# Password Policy (enforced by JANO)
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_DIGITS=True
PASSWORD_REQUIRE_SPECIAL=True

# Session Policy
SESSION_IDLE_TIMEOUT_MINUTES=30
SESSION_ABSOLUTE_TIMEOUT_HOURS=8

# Rate Limiting (enforced by JANO)
RATE_LIMIT_LOGIN_ATTEMPTS=5
RATE_LIMIT_WINDOW_MINUTES=1
RATE_LIMIT_GLOBAL_PER_MINUTE=100

# MFA Policy
MFA_REQUIRED_FOR_ROOT=True
MFA_REQUIRED_FOR_EXTERNAL=False
MFA_REQUIRED_FOR_USER_SIATA=False

# ========================================
# Development / Testing
# ========================================
# Only for development - shows OTP code in response
DEV_SHOW_OTP_IN_RESPONSE=True
# Skip email sending in development
DEV_SKIP_EMAIL=True

# ========================================
# Docker Configuration
# ========================================
CONTAINER_NAME_DB=auth_login_services_db
CONTAINER_NAME_AUTH=auth_microservice
CONTAINER_NAME_USERS=users_microservice
CONTAINER_NAME_OTP=otp_microservice
CONTAINER_NAME_JANO=jano_microservice

# Network
DOCKER_NETWORK=auth_network

# ========================================
# Health Check Intervals
# ========================================
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3